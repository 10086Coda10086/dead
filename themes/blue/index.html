<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ c.page.title }}</title>
    <meta name="description" content="{{ c.page.desc }}">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"> -->
    <link rel="icon" href="{{ c.page.favicon }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
    <style>
        body {
            background: url('{{ c.page.background }}') no-repeat center center fixed;
            background-color: #e6f2ff;
        }

        .card {
            background-color: rgba(230, 242, 255, 0.8) !important;
            color: #0066cc !important;
            border: 1px solid rgba(0, 102, 204, 0.3) !important;
            box-shadow: 0 8px 32px rgba(0, 102, 204, 0.2) !important;
        }

        a {
            color: #0066cc !important;
        }

        .awake {
            color: #009933 !important;
        }

        .sleeping {
            color: #666666 !important;
        }

        .error {
            color: #cc0000 !important;
        }

        h1, h2, h3 {
            color: #003366 !important;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="card light" id="user-status">
            <h1><ruby>似<rt>sǐ</rt></ruby>了吗?</h1>

            <!-- {disabled% if c.page.moonlight %} -->
            <!-- (moonlight) 透明度 / 暗色模式 -->
            <!-- {disabled% include "moonlight.html" %} -->
            <!-- {disabled% endif %} -->

            <h3><i><b>{{ c.page.name }}'s</b></i> Status:<br><a id="status">{{ status['name'] }}</a></h3>
            <p id="additional-info">{{ status['desc'] | safe }}</p>
            <p id="device-status">[设备状态列表]</p>

            <!-- {disabled% if c.util.steam_enabled %} -->
            <!-- (steam) Steam 状态模块 (iframe) -->
            <!-- {disabled% include "steam.html" %} -->
            <!-- {disabled% endif %} -->

            <p id="last-updated">最后更新: {{ last_updated }}</p>
        </div>

        {% for plugin in plugins %}
        <div class="card light" id="plugin-{{ plugin[0] }}">
            {{ plugin[1] | safe }}
        </div>
        {% endfor %}

        <!-- {disabled% if zhixue %} -->
        <!-- (zhixue) 智学网分数 -->
        <!-- {disabled% include "zhixue.html" %} -->
        <!-- {disabled% endif %} -->

        <div class="card light" id="more-text">
            <!-- {disabled% if c.page.hitokoto %} -->
            <!-- (hitokoto) 一言 -->
            <!-- {disabled% include "hitokoto.html" %} -->
            <!-- {disabled% endif %} -->
            <!-- more_text START -->
            {{ more_text | safe }}
            <!-- more_text END -->
            <p>你可以通过这个页面视奸 <b>{{ c.page.name }}</b>。<br>
                <!-- learn_more START -->
                <a href="{{ c.page.learn_more_link }}" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:1em;">
                        <path
                            d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32H320zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z" />
                    </svg>
                    {{ c.page.learn_more_text | safe }}
                </a>
                &nbsp;|&nbsp;
                <a href="/webui/login">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:1em;">
                        <path d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/>
                    </svg>
                    管理面板
                </a>
                <div style="margin-top: 10px;">
                    主题:
                    <a href="/?theme=default">默认</a> |
                    <a href="/?theme=dark">暗色</a> |
                    <a href="/?theme=blue">蓝色</a>
                </div>
                <!-- learn_more END -->
            </p>
        </div>
    </div>

    <!-- {disabled% if c.page.lantern %} -->
    <!-- (lantern) 节日灯笼 -->
    <!-- {disabled% include "lantern.html" %} -->
    <!-- {disabled% endif %} -->

    <!-- {disabled% if c.page.mplayer %} -->
    <!-- (mplayer) 音乐播放器 -->
    <!-- {disabled% include "mplayer.html" %} -->
    <!-- {disabled% endif %} -->

    <!-- {disabled% if c.page.canvas %} -->
    <!-- (canvas) 粒子效果 -->
    <!-- <script src="{{ url_for('static', filename='canvas.js') }}" defer></script> -->
    <!-- {disabled% endif %} -->

    <script>
        document.getElementById('status').classList.add("{{ status['color'] }}");

        // 处理主题设置
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const urlTheme = urlParams.get('theme');
            const currentTheme = "{{ current_theme }}";

            // 如果 URL 中有主题参数，则将其保存到 localStorage
            if (urlTheme) {
                localStorage.setItem('sleepy_theme', urlTheme);
            } else {
                // 如果 URL 中没有主题参数，检查 localStorage
                const savedTheme = localStorage.getItem('sleepy_theme');

                // 如果保存的主题是 default-light，将其更改为 default
                if (savedTheme === 'default-light') {
                    localStorage.setItem('sleepy_theme', 'default');
                    return;
                }

                // 如果有保存的主题且与当前主题不同，则切换到保存的主题
                if (savedTheme && savedTheme !== currentTheme) {
                    // 构建带有主题参数的 URL
                    const url = new URL(window.location.href);
                    url.searchParams.set('theme', savedTheme);
                    window.location.href = url.toString();
            }
        });
    </script>
    <script src="{{ url_for('static', filename='get.js') }}" defer></script>

</body>

</html>
